# ã‚·ãƒŠãƒªã‚ª5: Wizã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºã¨ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰èªè¨¼æƒ…å ±ã®è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³

## ğŸ“‹ ã‚·ãƒŠãƒªã‚ªæ¦‚è¦

### ç›®çš„
ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã€IaCã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆï¼ˆAPIã‚­ãƒ¼ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ãƒˆãƒ¼ã‚¯ãƒ³ç­‰ï¼‰ã‚’Wizã§è‡ªå‹•æ¤œå‡ºã—ã€æƒ…å ±æ¼æ´©ãƒªã‚¹ã‚¯ã‚’æœªç„¶ã«é˜²ãèƒ½åŠ›ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

### æ¤œè¨¼å†…å®¹
- âœ… IDEï¼ˆVSCodeæ‹¡å¼µæ©Ÿèƒ½ï¼‰ã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡º
- âœ… GitHub Appã«ã‚ˆã‚‹PRæ™‚ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡º
- âœ… Wiz CLIã‚’ä½¿ç”¨ã—ãŸCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®è‡ªå‹•ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³
- âœ… è¤‡æ•°ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¿ã‚¤ãƒ—ï¼ˆAWS Keyã€API Keyã€DB Passwordç­‰ï¼‰ã®æ¤œå‡º
- âœ… GitHub Secretsã¨ã®çµ±åˆ
- âœ… False Positiveè©•ä¾¡

---

## â±ï¸ æ‰€è¦æ™‚é–“

| ãƒ•ã‚§ãƒ¼ã‚º | æ‰€è¦æ™‚é–“ | èª¬æ˜ |
|---------|---------|------|
| **åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—** | 15-20åˆ† | ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç¢ºèªã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œè¨¼ |
| **æ¤œè¨¼ä½œæ¥­** | 20-30åˆ† | IDEãƒ»VCSãƒ»CI/CDã§ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºç¢ºèª |
| **å†æ¤œè¨¼** | 10åˆ† | æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã§åŒã˜æ¤œè¨¼ã‚’å®Ÿæ–½ã™ã‚‹å ´åˆ |

**ğŸ’¡ ãƒ’ãƒ³ãƒˆ**: æ—¢å­˜ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€è¨­å®šã¯æœ€å°é™ã§æ¸ˆã¿ã¾ã™ã€‚

---

## ğŸ“‹ å‰ææ¡ä»¶

### âœ… å¿…é ˆè¦ä»¶
- [x] **ã‚·ãƒŠãƒªã‚ª1å®Œäº†**: Wiz VSCodeæ‹¡å¼µæ©Ÿèƒ½ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€Wiz Service Accountä½œæˆæ¸ˆã¿
- [x] **ã‚·ãƒŠãƒªã‚ª2å®Œäº†**: Wiz GitHub AppãŒæ¥ç¶šæ¸ˆã¿
- [x] **ã‚·ãƒŠãƒªã‚ª3å®Œäº†**: GitHub Actionsã§Wiz CLIãŒå‹•ä½œç¢ºèªæ¸ˆã¿
- [x] **Gitç’°å¢ƒ**: Git 2.30ä»¥ä¸ŠãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿

### ğŸ“¦ å¿…è¦ãªãƒ„ãƒ¼ãƒ«
```bash
# ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
git --version          # Git 2.30ä»¥ä¸Š
code --version         # VSCode 1.80ä»¥ä¸Š
```

### ğŸ”‘ å¿…è¦ãªæƒ…å ±
- Wiz Service Account Client IDï¼ˆã‚·ãƒŠãƒªã‚ª1ã§å–å¾—ï¼‰
- Wiz Service Account Client Secretï¼ˆã‚·ãƒŠãƒªã‚ª1ã§å–å¾—ï¼‰

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç¢ºèª

ã“ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€**æ—¢å­˜ã®`taskflow-app`ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
WizCodeVerification/
â””â”€â”€ taskflow-app/
    â”œâ”€â”€ .github/workflows/
    â”‚   â””â”€â”€ S05-wiz-secret-scan.yml      â­ æ—¢å­˜ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
    â”œâ”€â”€ backend/                         # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºå¯¾è±¡ï¼‰
    â”‚   â”œâ”€â”€ .env.example                # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    â”‚   â””â”€â”€ src/
    â”œâ”€â”€ frontend/                        # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºå¯¾è±¡ï¼‰
    â”‚   â””â”€â”€ .env.example
    â”œâ”€â”€ terraform/                       # IaCï¼ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºå¯¾è±¡ï¼‰
    â”‚   â””â”€â”€ environments/
    â””â”€â”€ k8s/                            # Kubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
        â””â”€â”€ base/
```

### ğŸ¯ æ¤œè¨¼å¯¾è±¡

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | æ¤œå‡ºå¯¾è±¡ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ |
|-------------|------------|-----------------|
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | `taskflow-app/backend/` | API Keys, DB Passwords, JWT Secrets |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | `taskflow-app/frontend/` | API Keys, OAuth Tokens |
| **Terraform** | `taskflow-app/terraform/` | AWS Credentials, DB Passwords |
| **Kubernetes** | `taskflow-app/k8s/` | Secret values in manifests |
| **æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** | `scripts/` | ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç­‰ï¼ˆå‚è€ƒï¼‰ |

---

## ğŸ”§ æ‰‹é †1: æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ç¢ºèª

### 1.1 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ç¢ºèª

æ—¢å­˜ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç¢ºèªã—ã¾ã™ï¼š

```bash
# taskflow-appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd ~/WizCodeVerification/taskflow-app

# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
cat .github/workflows/S05-wiz-secret-scan.yml
```

**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¸»è¦ãªæ§‹æˆè¦ç´ **:

1. **4ã¤ã®ã‚¹ã‚­ãƒ£ãƒ³ã‚¸ãƒ§ãƒ–**:
   - **secret-scan-source-code**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³
   - **secret-scan-iac**: Terraformãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³
   - **secret-scan-k8s**: Kubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³
   - **secret-scan-scripts**: ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³

2. **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¸ãƒ§ãƒ–**:
   - **generate-secret-report**: å…¨ã‚¹ã‚­ãƒ£ãƒ³çµæœã®ã‚µãƒãƒªãƒ¼ç”Ÿæˆ

3. **é‡è¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³**:
   - `--secret-scan-only`: ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºã®ã¿ã«ç‰¹åŒ–
   - ã‚¿ã‚°ä»˜ã‘ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ£ãƒ³çµæœã®åˆ†é¡

### 1.2 ä¸»è¦ãªWiz CLIã‚³ãƒãƒ³ãƒ‰

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ä¾‹**:
```bash
wizcli dir scan \
  --path ./backend \
  --secret-scan-only \
  --name "backend-secrets-$(git rev-parse --short HEAD)" \
  --tag "component=backend" \
  --tag "scan-type=secret-detection"
```

**æ¤œå‡ºå¯¾è±¡ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¿ã‚¤ãƒ—**:
- AWS Access Keys (`AKIA...`)
- GitHub Tokens (`ghp_...`, `github_pat_...`)
- API Keys (`sk_live_...`, Stripeç­‰ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆæ¥ç¶šæ–‡å­—åˆ—å†…ï¼‰
- JWT Secrets
- Private Keys (PEMå½¢å¼)
- OAuth Client Secrets

---

## ğŸ”§ æ‰‹é †2: IDEï¼ˆVSCodeï¼‰ã§ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡º

### 2.1 Wiz VSCodeæ‹¡å¼µæ©Ÿèƒ½ã§ã®æ¤œå‡º

1. **VSCodeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã**:
```bash
cd ~/WizCodeVerification/taskflow-app
code .
```

2. **ãƒ†ã‚¹ãƒˆç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã**:
   - `backend/.env.example` ã‚’é–‹ã
   - Wizæ‹¡å¼µæ©Ÿèƒ½ãŒè‡ªå‹•çš„ã«ã‚¹ã‚­ãƒ£ãƒ³ã‚’é–‹å§‹

3. **æ¤œå‡ºçµæœã®ç¢ºèª**:
   - VSCodeä¸‹éƒ¨ã®ã€ŒPROBLEMSã€ã‚¿ãƒ–ã‚’ç¢ºèª
   - Wizã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰æ¤œå‡ºã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ç¢ºèª
   - å„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®è©³ç´°ï¼ˆã‚¿ã‚¤ãƒ—ã€ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ï¼‰ã‚’ç¢ºèª

**ğŸ’¡ ãƒ’ãƒ³ãƒˆ**: `.env.example`ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ãƒ€ãƒŸãƒ¼ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯æ¤œè¨¼ç”¨ã§ã‚ã‚Šã€å®Ÿéš›ã®èªè¨¼æƒ…å ±ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### 2.2 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œå‡ºã®ãƒ†ã‚¹ãƒˆ

æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ã‚¿ã‚¤ãƒ—ã—ã¦ã¿ã¾ã™ï¼ˆæ¤œè¨¼å¾Œã¯å‰Šé™¤ï¼‰:

```bash
# ãƒ†ã‚¹ãƒˆç”¨ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
cat > backend/test-secret.js << 'EOF'
// ãƒ†ã‚¹ãƒˆç”¨: ã“ã®å¾Œå‰Šé™¤ã—ã¦ãã ã•ã„
const AWS_ACCESS_KEY = "AKIAIOSFODNN7EXAMPLE";
const AWS_SECRET_KEY = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY";
EOF
```

VSCodeã§`backend/test-secret.js`ã‚’é–‹ãã€Wizæ‹¡å¼µæ©Ÿèƒ½ãŒå³åº§ã«æ¤œå‡ºã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

**æ¤œè¨¼å¾Œã¯å¿…ãšå‰Šé™¤**:
```bash
rm backend/test-secret.js
```

---

## ğŸ”§ æ‰‹é †3: GitHub Appï¼ˆVCSçµ±åˆï¼‰ã§ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡º

### 3.1 æ¤œè¨¼ç”¨ãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ

```bash
cd ~/WizCodeVerification/taskflow-app

# æ¤œè¨¼ç”¨ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b verify/S05-secret-detection-$(date +%Y%m%d-%H%M%S)
```

### 3.2 ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®è¿½åŠ 

```bash
# backend/.env.exampleã«ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’è¿½åŠ 
cat >> backend/.env.example << 'EOF'

# S05æ¤œè¨¼ç”¨: ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯ä½¿ç”¨ç¦æ­¢ï¼‰
TEST_AWS_KEY=AKIAIOSFODNN7EXAMPLE
TEST_STRIPE_KEY=sk_test_51HExample123456789abcdef
EOF

# ã‚³ãƒŸãƒƒãƒˆ
git add backend/.env.example
git commit -m "S05æ¤œè¨¼: ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºãƒ†ã‚¹ãƒˆç”¨ã®ãƒ€ãƒŸãƒ¼ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¿½åŠ "
```

### 3.3 GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦PRä½œæˆ

```bash
# ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin verify/S05-secret-detection-$(date +%Y%m%d-%H%M%S)

# GitHub CLIã§PRä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
gh pr create \
  --title "S05æ¤œè¨¼: ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºãƒ†ã‚¹ãƒˆ" \
  --body "Wizã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºæ©Ÿèƒ½ã®æ¤œè¨¼ç”¨PRã€‚ãƒ†ã‚¹ãƒˆç”¨ãƒ€ãƒŸãƒ¼ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å«ã¿ã¾ã™ã€‚"
```

### 3.4 Wiz GitHub Appã®æ¤œå‡ºçµæœã‚’ç¢ºèª

1. **GitHubã§PRãƒšãƒ¼ã‚¸ã‚’é–‹ã**
2. **ã€ŒChecksã€ã‚¿ãƒ–ã‚’ç¢ºèª**:
   - Wiz GitHub Appã®ã‚¹ã‚­ãƒ£ãƒ³çµæœã‚’ç¢ºèª
   - æ¤œå‡ºã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä¸€è¦§ã‚’ç¢ºèª
3. **ã€ŒFiles changedã€ã‚¿ãƒ–**:
   - ã‚³ãƒ¼ãƒ‰å·®åˆ†ä¸Šã«Wizã®ã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
```
âŒ Secret detected: AWS Access Key
   Location: backend/.env.example:4
   Type: AWS Access Key
   Risk: High
```

---

## ğŸ”§ æ‰‹é †4: CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡º

### 4.1 GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œ

å…ˆã»ã©ã®PRã¾ãŸã¯ãƒ–ãƒ©ãƒ³ãƒãƒ—ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚Šã€è‡ªå‹•çš„ã«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

```bash
# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒçŠ¶æ³ã®ç¢ºèªï¼ˆGitHub CLIï¼‰
gh run list --workflow=S05-wiz-secret-scan.yml --limit 5
```

### 4.2 GitHub Actionsãƒ­ã‚°ã®ç¢ºèª

1. **GitHubãƒªãƒã‚¸ãƒˆãƒªã®ã€ŒActionsã€ã‚¿ãƒ–ã‚’é–‹ã**
2. **ã€ŒS05 - Wiz Secret Scanã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠ**
3. **å„ã‚¸ãƒ§ãƒ–ã®å®Ÿè¡Œçµæœã‚’ç¢ºèª**:
   - âœ… `secret-scan-source-code` - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³
   - âœ… `secret-scan-iac` - Terraformã‚¹ã‚­ãƒ£ãƒ³
   - âœ… `secret-scan-k8s` - Kubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚¹ã‚­ãƒ£ãƒ³
   - âœ… `secret-scan-scripts` - ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¹ã‚­ãƒ£ãƒ³
   - âœ… `generate-secret-report` - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

### 4.3 ã‚¹ã‚­ãƒ£ãƒ³çµæœã®è©³ç´°ç¢ºèª

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ãƒ­ã‚°ä¾‹**:
```
Running: wizcli dir scan --path ./backend --secret-scan-only ...

ğŸ” Scanning for secrets in ./backend ...
âœ… Scan completed

ğŸ“Š Results:
- Total secrets detected: 3
- High severity: 2
- Medium severity: 1

ğŸ”´ Secrets found:
1. AWS Access Key (AKIA...) in backend/.env.example:4
2. Stripe API Key (sk_test...) in backend/.env.example:5
3. Database Password in backend/docker-compose.yml:15

è©³ç´°ã¯Wizã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚
```

### 4.4 ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ç¢ºèª

GitHub Actionsãƒšãƒ¼ã‚¸ã§ã€ã‚¹ã‚­ãƒ£ãƒ³ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰:

1. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã®ã€ŒArtifactsã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³
2. `secret-scan-summary-xxxxx` ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
3. `secret-scan-summary.md` ã‚’é–‹ã„ã¦å†…å®¹ç¢ºèª

---

## ğŸ”§ æ‰‹é †5: Wizã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã®è©³ç´°ç¢ºèª

### 5.1 Wizã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ­ã‚°ã‚¤ãƒ³

1. **https://app.wiz.io/ ã«ã‚¢ã‚¯ã‚»ã‚¹**
2. **Code > Secrets** ã«ç§»å‹•

### 5.2 æ¤œå‡ºã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ç¢ºèª

**ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š**:
```
Repository: <your-org>/WizCodeVerification
Path: taskflow-app/backend/*
```

**ç¢ºèªé …ç›®**:
- âœ… ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¿ã‚¤ãƒ—ï¼ˆAWS Key, API Keyç­‰ï¼‰
- âœ… æ¤œå‡ºå ´æ‰€ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€è¡Œç•ªå·ï¼‰
- âœ… ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ï¼ˆCritical, High, Mediumï¼‰
- âœ… æœ€åˆã®æ¤œå‡ºæ—¥æ™‚
- âœ… ä¿®æ­£ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

### 5.3 False Positiveã®è©•ä¾¡

1. **æ¤œå‡ºã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ç¢ºèª**
2. **False PositiveãŒã‚ã‚Œã°ã€ŒSuppressã€**:
   - ç†ç”±ã‚’è¨˜è¼‰ï¼ˆä¾‹: "Test data only", "Example configuration"ï¼‰
   - æŠ‘åˆ¶ãƒ«ãƒ¼ãƒ«ã®ä½œæˆ
3. **çœŸã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºã®ç²¾åº¦ã‚’è©•ä¾¡**

---

## ğŸ”§ æ‰‹é †6: ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹åé›†

### 6.1 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—

ä»¥ä¸‹ã®ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å–å¾—ã—ã¦ãã ã•ã„ï¼š

1. **VSCode**:
   - âœ… Wizæ‹¡å¼µæ©Ÿèƒ½ãŒã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æ¤œå‡ºã—ã¦ã„ã‚‹ç”»é¢
   - âœ… PROBLEMSã‚¿ãƒ–ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆä¸€è¦§

2. **GitHub PR**:
   - âœ… Wiz GitHub Appã®ãƒã‚§ãƒƒã‚¯çµæœï¼ˆChecksã‚¿ãƒ–ï¼‰
   - âœ… ã‚³ãƒ¼ãƒ‰å·®åˆ†ä¸Šã®Wizã‚³ãƒ¡ãƒ³ãƒˆï¼ˆFiles changedã‚¿ãƒ–ï¼‰

3. **GitHub Actions**:
   - âœ… S05ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œçµæœï¼ˆå…¨ã‚¸ãƒ§ãƒ–æˆåŠŸ/å¤±æ•—ï¼‰
   - âœ… ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ã‚¸ãƒ§ãƒ–ã®è©³ç´°ãƒ­ã‚°

4. **Wizã‚³ãƒ³ã‚½ãƒ¼ãƒ«**:
   - âœ… Code > Secrets ã®æ¤œå‡ºä¸€è¦§ç”»é¢
   - âœ… å€‹åˆ¥ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®è©³ç´°ç”»é¢ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€è¡Œç•ªå·è¡¨ç¤ºï¼‰

### 6.2 ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ä¿å­˜

```bash
# evidenceãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜
mkdir -p ~/WizCodeVerification/evidence/phase1/S05-secret-detection
cd ~/WizCodeVerification/evidence/phase1/S05-secret-detection

# ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã“ã“ã«ä¿å­˜
# - 01-vscode-secret-detection.png
# - 02-github-pr-wiz-check.png
# - 03-github-actions-workflow.png
# - 04-wiz-console-secrets.png

# ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# GitHub Actionsã‹ã‚‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã“ã“ã«ä¿å­˜
```

---

## ğŸ”§ æ‰‹é †7: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### 7.1 ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®å‰Šé™¤

```bash
cd ~/WizCodeVerification/taskflow-app

# mainãƒ–ãƒ©ãƒ³ãƒã«æˆ»ã‚‹
git checkout main

# æ¤œè¨¼ç”¨ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤
git branch -D verify/S05-secret-detection-*

# ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚‚å‰Šé™¤ï¼ˆPRãŒãƒãƒ¼ã‚¸/ã‚¯ãƒ­ãƒ¼ã‚ºæ¸ˆã¿ã®å ´åˆï¼‰
git push origin --delete verify/S05-secret-detection-*
```

### 7.2 PRã®ã‚¯ãƒ­ãƒ¼ã‚º

GitHubã§PRã‚’ã€ŒCloseã€ï¼ˆãƒãƒ¼ã‚¸ã—ãªã„ï¼‰ã—ã¾ã™ã€‚

**ç†ç”±**: ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯æœ¬ç•ªãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸ã™ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

---

## âœ… æ¤œè¨¼å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ä»¥ä¸‹ã®é …ç›®ã‚’ã™ã¹ã¦ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- [ ] **IDEæ¤œå‡º**: VSCodeæ‹¡å¼µæ©Ÿèƒ½ãŒã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¤œå‡ºã—ãŸ
- [ ] **VCSæ¤œå‡º**: Wiz GitHub AppãŒPRæ™‚ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æ¤œå‡ºã—ãŸ
- [ ] **CI/CDæ¤œå‡º**: GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ãŒå®Ÿè¡Œã•ã‚ŒãŸ
- [ ] **è¤‡æ•°ã‚¿ã‚¤ãƒ—æ¤œå‡º**: AWS Key, API Key, DB Passwordç­‰ãŒæ­£ã—ãæ¤œå‡ºã•ã‚ŒãŸ
- [ ] **Wizã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç¢ºèª**: æ¤œå‡ºã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒWizã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªã§ããŸ
- [ ] **False Positiveè©•ä¾¡**: èª¤æ¤œçŸ¥ã‚’è©•ä¾¡ã—ã€å¿…è¦ã«å¿œã˜ã¦æŠ‘åˆ¶ã—ãŸ
- [ ] **ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹åé›†**: å„æ®µéšã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å–å¾—ã—ãŸ
- [ ] **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: ãƒ†ã‚¹ãƒˆç”¨ãƒ–ãƒ©ãƒ³ãƒã¨PRã‚’å‰Šé™¤ã—ãŸ

---

## ğŸ“Š æ¤œè¨¼çµæœã‚µãƒãƒªãƒ¼

### æ¤œå‡ºã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¿ã‚¤ãƒ—

| ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¿ã‚¤ãƒ— | æ¤œå‡ºæ•° | ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ« | æ¤œå‡ºå ´æ‰€ã®ä¾‹ |
|----------------|--------|------------|------------|
| AWS Access Key | 2-3 | Critical | backend/.env.example, terraform/... |
| API Keys (Stripeç­‰) | 3-5 | High | backend/.env.example, frontend/... |
| Database Passwords | 2-4 | High | docker-compose.yml, k8s/... |
| JWT Secrets | 1-2 | Medium | backend/.env.example |
| Private Keys | 0-1 | Critical | scripts/... |

### æ¤œå‡ºæ®µéšåˆ¥ã®çµæœ

| æ¤œå‡ºæ®µéš | æ¤œå‡ºå¯å¦ | æ¤œå‡ºé€Ÿåº¦ | è©³ç´°åº¦ |
|---------|---------|---------|--------|
| **IDEï¼ˆVSCodeï¼‰** | âœ… | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | é«˜ï¼ˆè¡Œç•ªå·ã€ä¿®æ­£ææ¡ˆï¼‰ |
| **VCSï¼ˆGitHub Appï¼‰** | âœ… | PRä½œæˆæ™‚ | é«˜ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã€æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ |
| **CI/CDï¼ˆGitHub Actionsï¼‰** | âœ… | ãƒ“ãƒ«ãƒ‰æ™‚ | é«˜ï¼ˆåŒ…æ‹¬çš„ãƒ¬ãƒãƒ¼ãƒˆï¼‰ |

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### âŒ å•é¡Œ1: VSCodeæ‹¡å¼µæ©Ÿèƒ½ãŒã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æ¤œå‡ºã—ãªã„

**åŸå› ã¨å¯¾å‡¦**:
```bash
# Wizæ‹¡å¼µæ©Ÿèƒ½ã®å†èªè¨¼
1. VSCodeã§Command Palette (Ctrl+Shift+P)
2. "Wiz: Authenticate" ã‚’å®Ÿè¡Œ
3. Service Accountã§èªè¨¼

# æ‹¡å¼µæ©Ÿèƒ½ã®å†èµ·å‹•
1. VSCodeã‚’å†èµ·å‹•
2. "Wiz: Scan Workspace" ã‚’æ‰‹å‹•å®Ÿè¡Œ
```

### âŒ å•é¡Œ2: GitHub AppãŒã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æ¤œå‡ºã—ãªã„

**ç¢ºèªäº‹é …**:
```bash
# Wiz GitHub Appã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
1. GitHubãƒªãƒã‚¸ãƒˆãƒªã® Settings > Integrations
2. Wiz AppãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
3. ãƒªãƒã‚¸ãƒˆãƒªã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®ç¢ºèª

# PRã®å†ä½œæˆ
git commit --amend --no-edit
git push --force
```

### âŒ å•é¡Œ3: CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã‚¹ã‚­ãƒ£ãƒ³ã‚¨ãƒ©ãƒ¼

**åŸå› ã¨å¯¾å‡¦**:
```bash
# GitHub Secretsã®ç¢ºèª
gh secret list

# å¿…è¦ãªSecrets:
# - WIZ_CLIENT_ID
# - WIZ_CLIENT_SECRET

# Wizèªè¨¼ã®ç¢ºèª
wizcli auth --id "$WIZ_CLIENT_ID" --secret "$WIZ_CLIENT_SECRET"
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

### Wizå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Wiz Secret Detection](https://docs.wiz.io/wiz-docs/docs/secret-detection)
- [Wiz VSCode Extension](https://docs.wiz.io/wiz-docs/docs/vscode-extension)
- [Wiz GitHub App](https://docs.wiz.io/wiz-docs/docs/github-app)

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†**: GitHub Secretsã€AWS Secrets Managerã€HashiCorp Vaultã®ä½¿ç”¨
- **ç’°å¢ƒå¤‰æ•°**: `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.gitignore`ã«è¿½åŠ 
- **ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯**: Git pre-commitãƒ•ãƒƒã‚¯ã®æ´»ç”¨

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

**Phase 1å®Œäº†**: S01ï½S05ã®ã‚·ãƒŠãƒªã‚ªã‚’ã™ã¹ã¦å®Œäº†ã—ã¾ã—ãŸï¼

**Phase 2ã«é€²ã‚€å ´åˆ**:
1. [AWS_DEPLOYMENT_GUIDE.md](../guides/AWS_DEPLOYMENT_GUIDE.md)ã§AWSç’°å¢ƒã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
2. [S06: SBOMç”Ÿæˆã¨è¿½è·¡](../phase2-code-to-cloud/S06-sbom-tracking.md)ã«é€²ã‚€

**ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹åé›†**:
- [EVIDENCE_COLLECTION_GUIDE.md](../guides/EVIDENCE_COLLECTION_GUIDE.md)ã‚’å‚ç…§ã—ã¦ã€Phase 1å…¨ä½“ã®ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã‚’æ•´ç†

---

**âœ… S05æ¤œè¨¼å®Œäº†**: ã“ã‚Œã§Phase 1ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºæ¤œè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸã€‚
